Index: src/main/java/it/unipi/dii/inginf/lsdb/justrecipe/model/Recipe.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package it.unipi.dii.inginf.lsdb.justrecipe.model;\n\nimport com.google.gson.annotations.SerializedName;\nimport org.bson.types.ObjectId;\n\nimport java.beans.Transient;\nimport java.util.ArrayList;\nimport java.util.Date;\nimport java.util.List;\n\npublic class Recipe {\n    private String title;\n    private String instructions;\n    private List<String> ingredients;\n    private List<String> categories;\n    private int calories;\n    private int fat;\n    private int protein;\n    private int carbs;\n    private Date creationTime;\n    private String picture;\n    private String authorUsername;\n    private List<Comment> comments;\n\n    //Blank constructor\n    public Recipe(){}\n\n    //Constructor\n    public Recipe(String title, String instructions, List<String> ingredients, List<String> categories,\n                  int calories, int fat, int protein, int carbs, Date creationTime, String picture, String authorUsername,\n                  List<Comment> comments)\n    {\n        this.title = title;\n        this.picture = picture;\n        this.instructions = instructions;\n        this.ingredients = ingredients;\n        this.categories = categories;\n        this.creationTime = creationTime;\n        this.calories = calories;\n        this.fat = fat;\n        this.protein = protein;\n        this.carbs = carbs;\n        this.authorUsername = authorUsername;\n        this.comments = comments;\n    }\n\n    public Recipe(String title, String instructions, List<String> ingredients, List<String> categories,\n                  int calories, int fat, int protein, int carbs, Date creationTime, String picture,\n                  String authorUsername)\n    {\n        this( title, instructions, ingredients, categories, calories, fat, protein, carbs,\n                creationTime, picture, authorUsername, new ArrayList<Comment>());\n    }\n\n\n    //Getters\n\n    public String getTitle() {\n        return title;\n    }\n\n    public String getPicture() {\n        return picture;\n    }\n\n    public String getInstructions() {\n        return instructions;\n    }\n\n    public List<String> getIngredients() {\n        return ingredients;\n    }\n\n    public List<String> getCategories() {\n        return categories;\n    }\n\n    public Date getCreationTime() {\n        return creationTime;\n    }\n\n    public int getCalories() {\n        return calories;\n    }\n\n    public int getFat() {\n        return fat;\n    }\n\n    public int getProtein() {\n        return protein;\n    }\n\n    public int getCarbs() {\n        return carbs;\n    }\n\n    public String getAuthorUsername() {\n        return authorUsername;\n    }\n\n    public List<Comment> getComments() {\n        return comments;\n    }\n\n    //Setters\n    public void setTitle(String title) {\n        this.title = title;\n    }\n\n    public void setPicture(String picture) {\n        this.picture = picture;\n    }\n\n    public void setInstructions(String instructions) {\n        this.instructions = instructions;\n    }\n\n    public void setIngredients(List<String> ingredients) {\n        this.ingredients = ingredients;\n    }\n\n    public void setCategories(List<String> categories) {\n        this.categories = categories;\n    }\n\n    public void setCreationTime(Date creationTime) {\n        this.creationTime = creationTime;\n    }\n\n    public void setCalories(int calories) {\n        this.calories = calories;\n    }\n\n    public void setFat(int fat) {\n        this.fat = fat;\n    }\n\n    public void setProtein(int protein) {\n        this.protein = protein;\n    }\n\n    public void setCarbs(int carbs) {\n        this.carbs = carbs;\n    }\n\n    public void setAuthorUsername(String authorUsername) {\n        this.authorUsername = authorUsername;\n    }\n\n    public void setComments(List<Comment> comments) {\n        this.comments = comments;\n    }\n\n    @Override\n    public String toString() {\n        return \"Recipe{\" +\n                \"title='\" + title + '\\'' +\n                \", instructions='\" + instructions + '\\'' +\n                \", ingredients=\" + ingredients +\n                \", categories=\" + categories +\n                \", calories=\" + calories +\n                \", fat=\" + fat +\n                \", protein=\" + protein +\n                \", carbs=\" + carbs +\n                \", creationTime=\" + creationTime +\n                \", picture='\" + picture + '\\'' +\n                \", authorUsername='\" + authorUsername + '\\'' +\n                \", comments=\" + comments +\n                '}';\n    }\n}\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/it/unipi/dii/inginf/lsdb/justrecipe/model/Recipe.java b/src/main/java/it/unipi/dii/inginf/lsdb/justrecipe/model/Recipe.java
--- a/src/main/java/it/unipi/dii/inginf/lsdb/justrecipe/model/Recipe.java	(revision 7800a5bb4c859f1953c981fb0108b5a6aa8ba86c)
+++ b/src/main/java/it/unipi/dii/inginf/lsdb/justrecipe/model/Recipe.java	(date 1608065894806)
@@ -152,6 +152,8 @@
         this.comments = comments;
     }
 
+    public void addComments(Comment comment) {this.comments.add(comment);}
+
     @Override
     public String toString() {
         return "Recipe{" +
Index: src/main/java/it/unipi/dii/inginf/lsdb/justrecipe/utils/Utils.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package it.unipi.dii.inginf.lsdb.justrecipe.utils;\n\nimport com.thoughtworks.xstream.XStream;\nimport it.unipi.dii.inginf.lsdb.justrecipe.config.ConfigurationParameters;\nimport it.unipi.dii.inginf.lsdb.justrecipe.controller.CommentController;\nimport it.unipi.dii.inginf.lsdb.justrecipe.controller.RecipeSnapshotController;\nimport it.unipi.dii.inginf.lsdb.justrecipe.model.Comment;\nimport it.unipi.dii.inginf.lsdb.justrecipe.model.Recipe;\nimport javafx.event.Event;\nimport javafx.fxml.FXMLLoader;\nimport javafx.scene.Node;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Alert;\nimport javafx.scene.control.Label;\nimport javafx.scene.image.Image;\nimport javafx.scene.image.ImageView;\nimport javafx.scene.layout.HBox;\nimport javafx.scene.layout.Pane;\nimport javafx.scene.text.Font;\nimport javafx.stage.Stage;\nimport org.w3c.dom.Document;\nimport org.xml.sax.SAXException;\nimport javax.xml.XMLConstants;\nimport javax.xml.parsers.DocumentBuilder;\nimport javax.xml.parsers.DocumentBuilderFactory;\nimport javax.xml.transform.dom.DOMSource;\nimport javax.xml.transform.stream.StreamSource;\nimport javax.xml.validation.Schema;\nimport javax.xml.validation.SchemaFactory;\nimport java.io.File;\nimport java.io.IOException;\nimport java.nio.file.Files;\nimport java.nio.file.Paths;\nimport java.text.DateFormat;\nimport java.text.SimpleDateFormat;\nimport java.util.Date;\nimport java.util.Iterator;\nimport java.util.List;\n\n/**\n * Class that contains some useful method\n */\npublic class Utils {\n\n    /**\n     * Snippet of code for jumping in the next scene\n     * Every scene has associated its specific controller\n     * @param fileName      The name of the file in which i can obtain the GUI (.fxml)\n     * @param event         The event that leads to change the scene\n     * @return The new controller, because I need to pass some parameters\n     */\n    public static Object changeScene (String fileName, Event event)\n    {\n        Scene scene = null;\n        FXMLLoader loader = null;\n        try {\n            loader=new FXMLLoader(Utils.class.getResource(fileName));\n            Stage stage = (Stage) ((Node) event.getSource()).getScene().getWindow();\n            scene = new Scene(loader.load());\n            stage.setScene(scene);\n            stage.show();\n            return loader.getController();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n        return null;\n    }\n\n    /**\n     * This function is used to read the config.xml file\n     * @return  ConfigurationParameters instance\n     */\n    public static ConfigurationParameters readConfigurationParameters ()\n    {\n        if (validConfigurationParameters())\n        {\n            XStream xs = new XStream();\n\n            String text = null;\n            try {\n                text = new String(Files.readAllBytes(Paths.get(\"./config.xml\")));\n            }\n            catch (Exception e) {\n                System.err.println(e.getMessage());\n            }\n\n            return (ConfigurationParameters) xs.fromXML(text);\n        }\n        else\n        {\n            System.exit(1); //If i can't read the configuration file I can't continue with the program\n        }\n        return null;\n    }\n\n    /**\n     * This function is used to validate the config.xml with the config.xsd\n     * @return  true if config.xml is well formatted, otherwise false\n     */\n    private static boolean validConfigurationParameters()\n    {\n        try\n        {\n            DocumentBuilder documentBuilder = DocumentBuilderFactory.newInstance().newDocumentBuilder();\n            SchemaFactory schemaFactory = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);\n            Document document = documentBuilder.parse(\"./config.xml\");\n            Schema schema = schemaFactory.newSchema(new StreamSource(\"./config.xsd\"));\n            schema.newValidator().validate(new DOMSource(document));\n        }\n        catch (Exception e)\n        {\n            if (e instanceof SAXException)\n                System.out.println(\"Validation Error: \" + e.getMessage());\n            else\n                System.out.println(e.getMessage());\n\n            return false;\n        }\n        return true;\n    }\n\n    /**\n     * Function used to get the string representation of a List<String>, with every element separated by comma\n     * @param list  the list to transform\n     * @return      the string representation\n     */\n    public static String fromListToString (List<String> list)\n    {\n        String string = \"\";\n        Iterator<String> iterator = list.iterator();\n        while (iterator.hasNext())\n        {\n            string = string.concat(iterator.next());\n            if (iterator.hasNext())\n            {\n                string = string.concat(\", \");\n            }\n        }\n        return string;\n    }\n\n    /**\n     * Function that transform a Date object in the standard format chosen for the application\n     * @param date\n     * @return\n     */\n    public static String fromDateToString (Date date)\n    {\n        DateFormat dateFormat = new SimpleDateFormat(\"yyyy-MM-dd\");\n        return dateFormat.format(date);\n    }\n\n    /**\n     * Function that shows an error alert\n     * @param text  Text to be shown\n     */\n    public static void showErrorAlert (String text)\n    {\n        Alert alert = new Alert(Alert.AlertType.ERROR);\n        alert.setContentText(text);\n        alert.setHeaderText(\"Ops.. Something went wrong..\");\n        alert.setTitle(\"Error\");\n        ImageView imageView = new ImageView(new Image(\"/img/emoticon-cry.png\"));\n        alert.setGraphic(imageView);\n        alert.show();\n    }\n\n    /**\n     * This function create a pane that contains a recipe snapshot\n     * @param recipe    recipe to display in the snapshot\n     * @return\n     */\n    private static Pane createRecipeSnapshot(Recipe recipe)\n    {\n        Pane pane = null;\n        try {\n            FXMLLoader loader = new FXMLLoader(Utils.class.getResource(\"/recipeSnap.fxml\"));\n            pane = (Pane) loader.load();\n            RecipeSnapshotController recipeSnapshotController =\n                    (RecipeSnapshotController) loader.getController();\n            recipeSnapshotController.setRecipe(recipe);\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n        return pane;\n    }\n\n    /**\n     * Function that adds the snapshots of the recipes, 2 for each row\n     * @param pane      Pane in which I have to show the snapshots\n     * @param recipes   Recipes to show\n     */\n    public static void addRecipesSnap(Pane pane, List<Recipe> recipes) {\n        Iterator<Recipe> iterator = recipes.iterator();\n        while (iterator.hasNext())\n        {\n            HBox row = new HBox();\n            row.setStyle(\"-fx-padding: 10px\");\n            row.setSpacing(20);\n            Recipe recipe1 = iterator.next();\n            Pane rec1 = createRecipeSnapshot(recipe1);\n            row.getChildren().add(rec1);\n            if (iterator.hasNext())\n            {\n                Recipe recipe2 = iterator.next();\n                Pane rec2 = createRecipeSnapshot(recipe2);\n                row.getChildren().add(rec2);\n            }\n            pane.getChildren().add(row);\n        }\n    }\n\n    /**\n     * Function used to show the comments\n     * @param pane      Pane in which I have to show the comments\n     * @param comments  Comments to show\n     */\n    public static void showComments(Pane pane, List<Comment> comments) {\n        Iterator<Comment> iterator = comments.iterator();\n        while (iterator.hasNext())\n        {\n            Comment comment = iterator.next();\n            Pane commentPane = loadComment(comment);\n            pane.getChildren().add(commentPane);\n        }\n    }\n\n    /**\n     * Function used to load the .fxml for the comment\n     * @param comment   Comment to show\n     * @return          The pane in which I have showed the comment\n     */\n    private static Pane loadComment (Comment comment)\n    {\n        Pane pane = null;\n        try {\n            FXMLLoader loader = new FXMLLoader(Utils.class.getResource(\"/comment.fxml\"));\n            pane = (Pane) loader.load();\n            CommentController commentController =\n                    (CommentController) loader.getController();\n            commentController.setComment(comment);\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n        return pane;\n    }\n}\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/it/unipi/dii/inginf/lsdb/justrecipe/utils/Utils.java b/src/main/java/it/unipi/dii/inginf/lsdb/justrecipe/utils/Utils.java
--- a/src/main/java/it/unipi/dii/inginf/lsdb/justrecipe/utils/Utils.java	(revision 7800a5bb4c859f1953c981fb0108b5a6aa8ba86c)
+++ b/src/main/java/it/unipi/dii/inginf/lsdb/justrecipe/utils/Utils.java	(date 1608066949992)
@@ -225,6 +225,16 @@
         }
     }
 
+    /**
+     * Function used to show one comment
+     * @param pane      Pane in which I have to show the comments
+     * @param comment  Comments to show
+     */
+    public static void showComment(Pane pane, Comment comment){
+        Pane commentPane = loadComment(comment);
+        pane.getChildren().add(commentPane);
+    }
+
     /**
      * Function used to load the .fxml for the comment
      * @param comment   Comment to show
Index: src/main/java/it/unipi/dii/inginf/lsdb/justrecipe/controller/RecipePageController.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package it.unipi.dii.inginf.lsdb.justrecipe.controller;\n\nimport it.unipi.dii.inginf.lsdb.justrecipe.model.Comment;\nimport it.unipi.dii.inginf.lsdb.justrecipe.model.Recipe;\nimport it.unipi.dii.inginf.lsdb.justrecipe.model.Session;\nimport it.unipi.dii.inginf.lsdb.justrecipe.persistence.Neo4jDriver;\nimport it.unipi.dii.inginf.lsdb.justrecipe.utils.Utils;\nimport javafx.fxml.FXML;\nimport javafx.fxml.FXMLLoader;\nimport javafx.geometry.Pos;\nimport javafx.scene.control.Label;\nimport javafx.scene.image.Image;\nimport javafx.scene.image.ImageView;\nimport javafx.scene.input.MouseEvent;\nimport javafx.scene.layout.Pane;\nimport javafx.scene.layout.VBox;\nimport javafx.scene.text.Font;\nimport javafx.scene.text.Text;\n\nimport java.io.IOException;\nimport java.util.ArrayList;\nimport java.util.Date;\nimport java.util.Iterator;\nimport java.util.List;\n\n/**\n * Controller for the page of the recipe\n */\npublic class RecipePageController {\n\n    @FXML private ImageView homeImg;\n    @FXML private ImageView discoveryImg;\n    @FXML private ImageView profileImg;\n    @FXML private Text recipeInstructions;\n    @FXML private ImageView recipeLikeImg;\n    @FXML private ImageView recipePicture;\n    @FXML private ImageView logoutPic;\n    @FXML private Text recipeTitle;\n    @FXML private Text recipeUsername;\n    @FXML private Text recipeCarbs;\n    @FXML private Text recipeCalories;\n    @FXML private Text recipeFat;\n    @FXML private ImageView recipeEditImg;\n    @FXML private Text recipeCategories;\n    @FXML private Text recipeIngredients;\n    @FXML private Text recipeProtein;\n    @FXML private Label recipeLikes;\n    @FXML private Label recipeDate;\n    @FXML private VBox recipeVBox;\n    @FXML private ImageView recipeDelete;\n\n    private Recipe recipe;\n   // private String username;\n    private Session appSession;\n    private Neo4jDriver neo4jDriver;\n\n    public void initialize ()\n    {\n        homeImg.setOnMouseClicked(mouseEvent -> clickOnHomepageToChangePage(mouseEvent));\n        profileImg.setOnMouseClicked(mouseEvent -> clickOnProfileToChangePage(mouseEvent));\n        discoveryImg.setOnMouseClicked(mouseEvent -> clickOnDiscoveryToChangePage(mouseEvent));\n        logoutPic.setOnMouseClicked(mouseEvent -> clickOnLogoutImg(mouseEvent));\n        recipeVBox.setAlignment(Pos.CENTER);\n        appSession = Session.getInstance();\n        neo4jDriver = Neo4jDriver.getInstance();\n    }\n\n    /**\n     * Setters for the recipe, in which we also set the correct value to show\n     * @param recipe    Recipe to show\n     */\n    public void setRecipe(Recipe recipe) {\n        this.recipe = recipe;\n        recipeTitle.setText(recipe.getTitle());\n        recipeInstructions.setText(recipe.getInstructions());\n        if (recipe.getPicture() != null)\n        {\n            recipePicture.setImage(new Image(recipe.getPicture()));\n        }\n        else\n        {\n            recipePicture.setImage(new Image(\"img/genericRecipe.png\"));\n        }\n        recipeUsername.setText(recipe.getAuthorUsername());\n        recipeCarbs.setText(String.valueOf(recipe.getCarbs()));\n        recipeCalories.setText(String.valueOf(recipe.getCalories()));\n        recipeFat.setText(String.valueOf(recipe.getFat()));\n        recipeProtein.setText(String.valueOf(recipe.getProtein()));\n        recipeCategories.setText(Utils.fromListToString(recipe.getCategories()));\n        recipeIngredients.setText(Utils.fromListToString(recipe.getIngredients()));\n        recipeDate.setText(\"Published on: \" + Utils.fromDateToString(recipe.getCreationTime()));\n        //TO DO\n        recipeLikes.setText(\"Likes: 0\");\n\n        List<Comment> comments = new ArrayList<>();\n        comments.add(new Comment(\"Pippo\", \"Hello World!\", new Date()));\n        comments.add(new Comment(\"Pluto\", \"Fantastic recipe!\", new Date()));\n        recipe.setComments(comments);\n        if (comments != null)\n        {\n            Label commentsTitle = new Label(\"Comments:\");\n            commentsTitle.setFont(Font.font(24));\n            recipeVBox.getChildren().add(commentsTitle);\n            Utils.showComments(recipeVBox, recipe.getComments());\n        }\n\n        if(appSession.getLoggedUser().getRole()!=2 && !appSession.getLoggedUser().getUsername().equals(recipe.getAuthorUsername()))\n            recipeDelete.setVisible(false);\n        else\n            recipeDelete.setOnMouseClicked(mouseEvent -> neo4jDriver.deleteRecipe(recipe.getTitle(),recipe.getCreationTime()));\n    }\n\n    /**\n     * Function used to handle the click on the homepage icon\n     * @param mouseEvent    event that represents the click on the icon\n     */\n    private void clickOnHomepageToChangePage(MouseEvent mouseEvent){\n        HomePageController homePageController = (HomePageController)\n                Utils.changeScene(\"/homepage.fxml\", mouseEvent);\n    }\n\n    /**\n     * Function used to handle the click on the profile icon\n     * @param mouseEvent    event that represents the click on the icon\n     */\n    private void clickOnProfileToChangePage(MouseEvent mouseEvent){\n        ProfilePageController profilePageController = (ProfilePageController)\n                Utils.changeScene(\"/profilePage.fxml\", mouseEvent);\n        profilePageController.setProfile(Session.getInstance().getLoggedUser());\n    }\n\n    /**\n     * Function used to handle the click on the discovery icon\n     * @param mouseEvent    event that represents the click on the icon\n     */\n    private void clickOnDiscoveryToChangePage(MouseEvent mouseEvent){\n        DiscoveryPageController discoveryPageController = (DiscoveryPageController)\n                Utils.changeScene(\"/discoveryPage.fxml\", mouseEvent);\n    }\n\n    /**\n     * Function that let the logout action, by going into the welcome page\n     * @param mouseEvent event that represents the click on the icon\n     */\n    private void clickOnLogoutImg(MouseEvent mouseEvent){\n        try {\n            WelcomePageController welcomePageController = (WelcomePageController)\n                    Utils.changeScene(\"/welcome.fxml\", mouseEvent);\n        }catch (NullPointerException n){System.out.println(\"profilePageController is null!!!!\");}\n    }\n}\n\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/it/unipi/dii/inginf/lsdb/justrecipe/controller/RecipePageController.java b/src/main/java/it/unipi/dii/inginf/lsdb/justrecipe/controller/RecipePageController.java
--- a/src/main/java/it/unipi/dii/inginf/lsdb/justrecipe/controller/RecipePageController.java	(revision 7800a5bb4c859f1953c981fb0108b5a6aa8ba86c)
+++ b/src/main/java/it/unipi/dii/inginf/lsdb/justrecipe/controller/RecipePageController.java	(date 1608067575072)
@@ -5,10 +5,14 @@
 import it.unipi.dii.inginf.lsdb.justrecipe.model.Session;
 import it.unipi.dii.inginf.lsdb.justrecipe.persistence.Neo4jDriver;
 import it.unipi.dii.inginf.lsdb.justrecipe.utils.Utils;
+import javafx.event.ActionEvent;
 import javafx.fxml.FXML;
 import javafx.fxml.FXMLLoader;
 import javafx.geometry.Pos;
+import javafx.scene.AccessibleAction;
+import javafx.scene.control.Button;
 import javafx.scene.control.Label;
+import javafx.scene.control.TextArea;
 import javafx.scene.image.Image;
 import javafx.scene.image.ImageView;
 import javafx.scene.input.MouseEvent;
@@ -48,6 +52,9 @@
     @FXML private Label recipeDate;
     @FXML private VBox recipeVBox;
     @FXML private ImageView recipeDelete;
+    @FXML private TextArea commentsArea;
+    @FXML private Button sendButton;
+    @FXML private Button cancelButton;
 
     private Recipe recipe;
    // private String username;
@@ -63,6 +70,32 @@
         recipeVBox.setAlignment(Pos.CENTER);
         appSession = Session.getInstance();
         neo4jDriver = Neo4jDriver.getInstance();
+        sendButton.setOnAction(actionEvent -> handleSendButtonAction(actionEvent));
+        cancelButton.setOnAction(actionEvent -> handleCancelButtonAction(actionEvent));
+    }
+
+    private void handleSendButtonAction(ActionEvent actionEvent){
+        if(commentsArea.getText().equals("")) {
+            Utils.showErrorAlert("No Comments in the CommentsArea");
+            return;
+        }
+        Comment comment = new Comment(appSession.getLoggedUser().getUsername(), commentsArea.getText(), new Date());
+        if(recipe.getComments() != null){
+            System.out.println("comments!=null");
+            recipe.addComments(comment);
+            Utils.showComment(recipeVBox, comment);
+        }else {
+            System.out.println("comments==null");
+            List<Comment> comments= new ArrayList<>();
+            comments.add(comment);
+            recipe.setComments(comments);
+            Utils.showComments(recipeVBox, recipe.getComments());
+        }
+//        System.out.println(recipe.getComments());
+    }
+
+    private void handleCancelButtonAction(ActionEvent actionEvent){
+        if(!commentsArea.getText().equals("")) commentsArea.setText("");
     }
 
     /**
@@ -92,17 +125,17 @@
         //TO DO
         recipeLikes.setText("Likes: 0");
 
-        List<Comment> comments = new ArrayList<>();
-        comments.add(new Comment("Pippo", "Hello World!", new Date()));
-        comments.add(new Comment("Pluto", "Fantastic recipe!", new Date()));
-        recipe.setComments(comments);
-        if (comments != null)
-        {
-            Label commentsTitle = new Label("Comments:");
-            commentsTitle.setFont(Font.font(24));
-            recipeVBox.getChildren().add(commentsTitle);
-            Utils.showComments(recipeVBox, recipe.getComments());
-        }
+//        List<Comment> comments = new ArrayList<>();
+//        comments.add(new Comment("Pippo", "Hello World!", new Date()));
+//        comments.add(new Comment("Pluto", "Fantastic recipe!", new Date()));
+//        recipe.setComments(comments);
+//        if (comments != null)
+//        {
+//            Label commentsTitle = new Label("Comments:");
+//            commentsTitle.setFont(Font.font(24));
+//            recipeVBox.getChildren().add(commentsTitle);
+//            Utils.showComments(recipeVBox, recipe.getComments());
+//        }
 
         if(appSession.getLoggedUser().getRole()!=2 && !appSession.getLoggedUser().getUsername().equals(recipe.getAuthorUsername()))
             recipeDelete.setVisible(false);
Index: src/main/resources/recipePage.fxml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\n\n<?import javafx.geometry.Insets?>\n<?import javafx.scene.control.Label?>\n<?import javafx.scene.control.ScrollPane?>\n<?import javafx.scene.effect.Blend?>\n<?import javafx.scene.image.Image?>\n<?import javafx.scene.image.ImageView?>\n<?import javafx.scene.layout.BorderPane?>\n<?import javafx.scene.layout.HBox?>\n<?import javafx.scene.layout.Pane?>\n<?import javafx.scene.layout.VBox?>\n<?import javafx.scene.shape.Line?>\n<?import javafx.scene.text.Font?>\n<?import javafx.scene.text.Text?>\n\n<VBox xmlns=\"http://javafx.com/javafx/11.0.1\" xmlns:fx=\"http://javafx.com/fxml/1\" fx:controller=\"it.unipi.dii.inginf.lsdb.justrecipe.controller.RecipePageController\">\n   <children>\n      <BorderPane prefHeight=\"84.0\" style=\"-fx-background-color: rgb(237, 160, 66);\">\n         <effect>\n            <Blend />\n         </effect>\n         <left>\n            <ImageView fitHeight=\"81.0\" fitWidth=\"95.0\" pickOnBounds=\"true\" preserveRatio=\"true\" BorderPane.alignment=\"CENTER\">\n               <image>\n                  <Image url=\"@img/icon.png\" />\n               </image>\n               <BorderPane.margin>\n                  <Insets left=\"20.0\" />\n               </BorderPane.margin>\n            </ImageView>\n         </left>\n         <right>\n            <HBox alignment=\"CENTER\" prefHeight=\"84.0\" prefWidth=\"240.0\" BorderPane.alignment=\"CENTER\">\n               <children>\n                  <ImageView fx:id=\"logoutPic\" fitHeight=\"45.0\" fitWidth=\"45.0\" pickOnBounds=\"true\" preserveRatio=\"true\">\n                     <image>\n                        <Image url=\"@img/exit.png\" />\n                     </image>\n                     <HBox.margin>\n                        <Insets right=\"20.0\" />\n                     </HBox.margin>\n                  </ImageView>\n                  <ImageView fx:id=\"homeImg\" fitHeight=\"45.0\" fitWidth=\"45.0\" pickOnBounds=\"true\" preserveRatio=\"true\">\n                     <image>\n                        <Image url=\"@img/home.png\" />\n                     </image>\n                     <HBox.margin>\n                        <Insets right=\"20.0\" />\n                     </HBox.margin>\n                  </ImageView>\n                  <ImageView fx:id=\"discoveryImg\" fitHeight=\"45.0\" fitWidth=\"45.0\" pickOnBounds=\"true\" preserveRatio=\"true\">\n                     <image>\n                        <Image url=\"@img/discovery.png\" />\n                     </image>\n                     <HBox.margin>\n                        <Insets right=\"20.0\" />\n                     </HBox.margin>\n                  </ImageView>\n                  <ImageView fx:id=\"profileImg\" fitHeight=\"45.0\" fitWidth=\"45.0\" pickOnBounds=\"true\" preserveRatio=\"true\">\n                     <image>\n                        <Image url=\"@img/user.png\" />\n                     </image>\n                     <HBox.margin>\n                        <Insets right=\"20.0\" />\n                     </HBox.margin>\n                  </ImageView>\n               </children>\n            </HBox>\n         </right>\n         <center>\n            <HBox alignment=\"CENTER_LEFT\" BorderPane.alignment=\"CENTER\" />\n         </center>\n      </BorderPane>\n      <ScrollPane hbarPolicy=\"NEVER\" vbarPolicy=\"ALWAYS\">\n         <content>\n            <HBox alignment=\"CENTER\" prefHeight=\"693.0\" prefWidth=\"1197.0\" style=\"-fx-background-color: RGB(204, 199, 194);\">\n               <opaqueInsets>\n                  <Insets />\n               </opaqueInsets>\n               <children>\n                  <ScrollPane hbarPolicy=\"NEVER\" prefWidth=\"772.0\" style=\"-fx-background-color: white;\" vbarPolicy=\"NEVER\">\n                     <content>\n                        <VBox fx:id=\"recipeVBox\" maxHeight=\"1.7976931348623157E308\" maxWidth=\"1.7976931348623157E308\" prefWidth=\"770.0\" spacing=\"20.0\" style=\"-fx-background-color: white;\">\n                           <children>\n                              <Pane maxHeight=\"1.7976931348623157E308\" maxWidth=\"1.7976931348623157E308\" VBox.vgrow=\"ALWAYS\">\n                                 <children>\n                                    <Text fx:id=\"recipeTitle\" layoutX=\"20.0\" layoutY=\"66.0\" strokeType=\"OUTSIDE\" strokeWidth=\"0.0\" text=\"Tiramisu\" wrappingWidth=\"725.0\">\n                                       <font>\n                                          <Font size=\"48.0\" />\n                                       </font>\n                                    </Text>\n                                 </children>\n                              </Pane>\n                              <HBox prefHeight=\"247.0\" prefWidth=\"770.0\" VBox.vgrow=\"ALWAYS\">\n                                 <children>\n                                    <Pane maxHeight=\"1.7976931348623157E308\" maxWidth=\"1.7976931348623157E308\" prefHeight=\"250.0\" prefWidth=\"260.0\">\n                                       <children>\n                                          <ImageView fx:id=\"recipePicture\" fitHeight=\"208.0\" fitWidth=\"232.0\" layoutX=\"35.0\" pickOnBounds=\"true\" preserveRatio=\"true\">\n                                             <image>\n                                                <Image url=\"@img/genericRecipe.png\" />\n                                             </image>\n                                          </ImageView>\n                                       </children>\n                                    </Pane>\n                                    <Pane prefHeight=\"250.0\" prefWidth=\"199.0\">\n                                       <children>\n                                          <ImageView fitHeight=\"40.0\" fitWidth=\"40.0\" pickOnBounds=\"true\" preserveRatio=\"true\">\n                                             <image>\n                                                <Image url=\"@img/user.png\" />\n                                             </image>\n                                          </ImageView>\n                                          <Text fx:id=\"recipeUsername\" layoutX=\"48.0\" layoutY=\"29.0\" strokeType=\"OUTSIDE\" strokeWidth=\"0.0\" text=\"Username\">\n                                             <font>\n                                                <Font size=\"22.0\" />\n                                             </font>\n                                          </Text>\n                                          <ImageView fitHeight=\"40.0\" fitWidth=\"40.0\" layoutY=\"46.0\" pickOnBounds=\"true\" preserveRatio=\"true\">\n                                             <image>\n                                                <Image url=\"@img/carbs.png\" />\n                                             </image>\n                                          </ImageView>\n                                          <ImageView fitHeight=\"40.0\" fitWidth=\"40.0\" layoutY=\"88.0\" pickOnBounds=\"true\" preserveRatio=\"true\">\n                                             <image>\n                                                <Image url=\"@img/calories.png\" />\n                                             </image>\n                                          </ImageView>\n                                          <ImageView fitHeight=\"40.0\" fitWidth=\"40.0\" layoutY=\"136.0\" pickOnBounds=\"true\" preserveRatio=\"true\">\n                                             <image>\n                                                <Image url=\"@img/fat.png\" />\n                                             </image>\n                                          </ImageView>\n                                          <Text fx:id=\"recipeCarbs\" layoutX=\"55.0\" layoutY=\"75.0\" strokeType=\"OUTSIDE\" strokeWidth=\"0.0\" text=\"30\">\n                                             <font>\n                                                <Font size=\"22.0\" />\n                                             </font>\n                                          </Text>\n                                          <Text fx:id=\"recipeCalories\" layoutX=\"55.0\" layoutY=\"124.0\" strokeType=\"OUTSIDE\" strokeWidth=\"0.0\" text=\"20\">\n                                             <font>\n                                                <Font size=\"22.0\" />\n                                             </font>\n                                          </Text>\n                                          <Text fx:id=\"recipeFat\" layoutX=\"55.0\" layoutY=\"165.0\" strokeType=\"OUTSIDE\" strokeWidth=\"0.0\" text=\"40\">\n                                             <font>\n                                                <Font size=\"22.0\" />\n                                             </font>\n                                          </Text>\n                                          <ImageView fitHeight=\"40.0\" fitWidth=\"40.0\" layoutY=\"179.0\" pickOnBounds=\"true\" preserveRatio=\"true\">\n                                             <image>\n                                                <Image url=\"@img/protein1.png\" />\n                                             </image>\n                                          </ImageView>\n                                          <Text fx:id=\"recipeProtein\" layoutX=\"55.0\" layoutY=\"208.0\" strokeType=\"OUTSIDE\" strokeWidth=\"0.0\" text=\"50\">\n                                             <font>\n                                                <Font size=\"22.0\" />\n                                             </font>\n                                          </Text>\n                                          <Line endY=\"-38.0\" layoutX=\"178.0\" layoutY=\"51.0\" startY=\"167.0\" />\n                                       </children>\n                                    </Pane>\n                                    <Pane prefHeight=\"240.0\" prefWidth=\"318.0\">\n                                       <children>\n                                          <ImageView fx:id=\"recipeLikeImg\" fitHeight=\"81.0\" fitWidth=\"93.0\" layoutX=\"9.0\" layoutY=\"106.0\" pickOnBounds=\"true\" preserveRatio=\"true\">\n                                             <image>\n                                                <Image url=\"@img/like.png\" />\n                                             </image>\n                                          </ImageView>\n                                          <ImageView fx:id=\"recipeEditImg\" fitHeight=\"81.0\" fitWidth=\"70.0\" layoutX=\"131.0\" layoutY=\"109.0\" pickOnBounds=\"true\" preserveRatio=\"true\">\n                                             <image>\n                                                <Image url=\"@img/edit.png\" />\n                                             </image>\n                                          </ImageView>\n                                          <Label fx:id=\"recipeLikes\" layoutX=\"14.0\" layoutY=\"23.0\" text=\"Like:\">\n                                             <font>\n                                                <Font size=\"15.0\" />\n                                             </font>\n                                          </Label>\n                                          <Label fx:id=\"recipeDate\" layoutX=\"14.0\" layoutY=\"51.0\" text=\"Published on:\">\n                                             <font>\n                                                <Font size=\"15.0\" />\n                                             </font>\n                                          </Label>\n                                          <ImageView fx:id=\"recipeDelete\" fitHeight=\"81.0\" fitWidth=\"200.0\" layoutX=\"231.0\" layoutY=\"106.0\" pickOnBounds=\"true\" preserveRatio=\"true\">\n                                             <image>\n                                                <Image url=\"@img/delete.png\" />\n                                             </image>\n                                          </ImageView>\n                                       </children>\n                                    </Pane>\n                                 </children>\n                                 <padding>\n                                    <Insets top=\"20.0\" />\n                                 </padding>\n                              </HBox>\n                              <Pane maxHeight=\"1.7976931348623157E308\" maxWidth=\"1.7976931348623157E308\" prefWidth=\"770.0\" VBox.vgrow=\"ALWAYS\">\n                                 <children>\n                                    <Text fx:id=\"recipeInstructions\" layoutX=\"23.0\" layoutY=\"20.0\" strokeType=\"OUTSIDE\" strokeWidth=\"0.0\" text=\"Anticamente le nonne usavano preparare una colazione che oggi potremmo definirepovera, ma che all’epoca era davvero ricchissima! Ancora oggi la ricetta è immutata,basta rompere in un bicchiere un uovo freschissimo e sbatterlo con dello zucchero ea piacere aggiungere caffè o latte caldo, per i più piccoli, e marsala o anice per i piùgrandicelli. Ed è proprio da questa portentosa crema che nasce la crema al mascarponebase del tiramisù. Il dolce italiano per eccellenza, quello più famoso e amato,ma soprattutto che ha dato vita a tantissime altre versioni, anche tiramisù senza uova!Poi il tiramisù alle fragole o quello alla Nutella, giusto per citarne un paio!Senza contare le rivisitazioni più raffinate come la crostata morbida o la torta al tiramisù.\" wrappingWidth=\"725.0\" />\n                                 </children>\n                                 <VBox.margin>\n                                    <Insets />\n                                 </VBox.margin>\n                              </Pane>\n                              <Pane maxHeight=\"1.7976931348623157E308\" maxWidth=\"1.7976931348623157E308\" VBox.vgrow=\"ALWAYS\">\n                                 <children>\n                                    <ImageView fitHeight=\"71.0\" fitWidth=\"63.0\" layoutX=\"35.0\" layoutY=\"9.0\" pickOnBounds=\"true\" preserveRatio=\"true\">\n                                       <image>\n                                          <Image url=\"@img/tag.png\" />\n                                       </image>\n                                    </ImageView>\n                                    <Text fx:id=\"recipeCategories\" layoutX=\"117.0\" layoutY=\"37.0\" strokeType=\"OUTSIDE\" strokeWidth=\"0.0\" text=\"italian, dolce, prova, ciao, mascarpone\" wrappingWidth=\"600.0\">\n                                       <font>\n                                          <Font size=\"15.0\" />\n                                       </font>\n                                    </Text>\n                                 </children>\n                                 <opaqueInsets>\n                                    <Insets />\n                                 </opaqueInsets>\n                                 <VBox.margin>\n                                    <Insets />\n                                 </VBox.margin>\n                              </Pane>\n                              <Pane maxHeight=\"1.7976931348623157E308\" maxWidth=\"1.7976931348623157E308\" prefWidth=\"770.0\" style=\"-fx-background-color: white;\" VBox.vgrow=\"ALWAYS\">\n                                 <children>\n                                    <ImageView fitHeight=\"84.0\" fitWidth=\"78.0\" layoutX=\"20.0\" pickOnBounds=\"true\" preserveRatio=\"true\">\n                                       <image>\n                                          <Image url=\"@img/ingredients1.png\" />\n                                       </image>\n                                    </ImageView>\n                                    <Text fx:id=\"recipeIngredients\" layoutX=\"114.0\" layoutY=\"45.0\" strokeType=\"OUTSIDE\" strokeWidth=\"0.0\" text=\"uova, mascarpone, ingr1, ingr2, ingr3, ingr4, ingr5\" wrappingWidth=\"600.0\">\n                                       <font>\n                                          <Font size=\"15.0\" />\n                                       </font>\n                                    </Text>\n                                 </children>\n                                 <VBox.margin>\n                                    <Insets bottom=\"35.0\" />\n                                 </VBox.margin>\n                              </Pane>\n                           </children>\n                        </VBox>\n                     </content>\n                  </ScrollPane>\n               </children>\n            </HBox>\n         </content>\n      </ScrollPane>\n   </children>\n</VBox>\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/resources/recipePage.fxml b/src/main/resources/recipePage.fxml
--- a/src/main/resources/recipePage.fxml	(revision 7800a5bb4c859f1953c981fb0108b5a6aa8ba86c)
+++ b/src/main/resources/recipePage.fxml	(date 1608057150850)
@@ -1,8 +1,10 @@
 <?xml version="1.0" encoding="UTF-8"?>
 
 <?import javafx.geometry.Insets?>
+<?import javafx.scene.control.Button?>
 <?import javafx.scene.control.Label?>
 <?import javafx.scene.control.ScrollPane?>
+<?import javafx.scene.control.TextArea?>
 <?import javafx.scene.effect.Blend?>
 <?import javafx.scene.image.Image?>
 <?import javafx.scene.image.ImageView?>
@@ -74,7 +76,7 @@
       </BorderPane>
       <ScrollPane hbarPolicy="NEVER" vbarPolicy="ALWAYS">
          <content>
-            <HBox alignment="CENTER" prefHeight="693.0" prefWidth="1197.0" style="-fx-background-color: RGB(204, 199, 194);">
+            <HBox alignment="CENTER" prefHeight="700.0" prefWidth="1197.0" style="-fx-background-color: RGB(204, 199, 194);">
                <opaqueInsets>
                   <Insets />
                </opaqueInsets>
@@ -85,7 +87,7 @@
                            <children>
                               <Pane maxHeight="1.7976931348623157E308" maxWidth="1.7976931348623157E308" VBox.vgrow="ALWAYS">
                                  <children>
-                                    <Text fx:id="recipeTitle" layoutX="20.0" layoutY="66.0" strokeType="OUTSIDE" strokeWidth="0.0" text="Tiramisu" wrappingWidth="725.0">
+                                    <Text fx:id="recipeTitle" focusTraversable="true" layoutX="20.0" layoutY="66.0" strokeType="OUTSIDE" strokeWidth="0.0" text="Tiramisu" wrappingWidth="725.0">
                                        <font>
                                           <Font size="48.0" />
                                        </font>
@@ -192,6 +194,23 @@
                                     <Insets top="20.0" />
                                  </padding>
                               </HBox>
+                              <Pane maxHeight="1.7976931348623157E308" maxWidth="1.7976931348623157E308" prefWidth="770.0" style="-fx-background-color: white;" VBox.vgrow="ALWAYS">
+                                 <children>
+                                    <ImageView fitHeight="84.0" fitWidth="78.0" layoutX="20.0" pickOnBounds="true" preserveRatio="true">
+                                       <image>
+                                          <Image url="@img/ingredients1.png" />
+                                       </image>
+                                    </ImageView>
+                                    <Text fx:id="recipeIngredients" layoutX="114.0" layoutY="45.0" strokeType="OUTSIDE" strokeWidth="0.0" text="uova, mascarpone, ingr1, ingr2, ingr3, ingr4, ingr5" wrappingWidth="600.0">
+                                       <font>
+                                          <Font size="15.0" />
+                                       </font>
+                                    </Text>
+                                 </children>
+                                 <VBox.margin>
+                                    <Insets bottom="5.0" />
+                                 </VBox.margin>
+                              </Pane>
                               <Pane maxHeight="1.7976931348623157E308" maxWidth="1.7976931348623157E308" prefWidth="770.0" VBox.vgrow="ALWAYS">
                                  <children>
                                     <Text fx:id="recipeInstructions" layoutX="23.0" layoutY="20.0" strokeType="OUTSIDE" strokeWidth="0.0" text="Anticamente le nonne usavano preparare una colazione che oggi potremmo definirepovera, ma che all’epoca era davvero ricchissima! Ancora oggi la ricetta è immutata,basta rompere in un bicchiere un uovo freschissimo e sbatterlo con dello zucchero ea piacere aggiungere caffè o latte caldo, per i più piccoli, e marsala o anice per i piùgrandicelli. Ed è proprio da questa portentosa crema che nasce la crema al mascarponebase del tiramisù. Il dolce italiano per eccellenza, quello più famoso e amato,ma soprattutto che ha dato vita a tantissime altre versioni, anche tiramisù senza uova!Poi il tiramisù alle fragole o quello alla Nutella, giusto per citarne un paio!Senza contare le rivisitazioni più raffinate come la crostata morbida o la torta al tiramisù." wrappingWidth="725.0" />
@@ -217,25 +236,20 @@
                                     <Insets />
                                  </opaqueInsets>
                                  <VBox.margin>
-                                    <Insets />
+                                    <Insets bottom="20.0" />
                                  </VBox.margin>
                               </Pane>
-                              <Pane maxHeight="1.7976931348623157E308" maxWidth="1.7976931348623157E308" prefWidth="770.0" style="-fx-background-color: white;" VBox.vgrow="ALWAYS">
+                              <Pane prefHeight="200.0" prefWidth="200.0">
                                  <children>
-                                    <ImageView fitHeight="84.0" fitWidth="78.0" layoutX="20.0" pickOnBounds="true" preserveRatio="true">
-                                       <image>
-                                          <Image url="@img/ingredients1.png" />
-                                       </image>
-                                    </ImageView>
-                                    <Text fx:id="recipeIngredients" layoutX="114.0" layoutY="45.0" strokeType="OUTSIDE" strokeWidth="0.0" text="uova, mascarpone, ingr1, ingr2, ingr3, ingr4, ingr5" wrappingWidth="600.0">
+                                    <TextArea fx:id="commentsArea" focusTraversable="false" layoutX="29.0" layoutY="39.0" prefHeight="106.0" prefWidth="723.0" />
+                                    <Label layoutX="282.0" layoutY="9.0" text="Write a comment:">
                                        <font>
-                                          <Font size="15.0" />
+                                          <Font size="24.0" />
                                        </font>
-                                    </Text>
+                                    </Label>
+                                    <Button fx:id="sendButton" layoutX="701.0" layoutY="160.0" mnemonicParsing="false" text="Send" />
+                                    <Button fx:id="cancelButton" layoutX="624.0" layoutY="160.0" mnemonicParsing="false" text="Cancel" />
                                  </children>
-                                 <VBox.margin>
-                                    <Insets bottom="35.0" />
-                                 </VBox.margin>
                               </Pane>
                            </children>
                         </VBox>
